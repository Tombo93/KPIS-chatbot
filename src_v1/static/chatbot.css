 :root {
   --bg: #0f172a;
   /* slate-900 */
   --panel: #0b1220;
   /* deeper slate */
   --muted: #94a3b8;
   /* slate-400 */
   --text: #e2e8f0;
   /* slate-200 */
   --accent: #60a5fa;
   /* blue-400 */
   --accent-strong: #3b82f6;
   /* blue-500 */
   --border: #1e293b;
   /* slate-800 */
   --bubble-user: #0b3b7c;
   --bubble-ai: #0d1b2a;
   --success: #22c55e;
   --warning: #f59e0b;
   --danger: #ef4444;
   --shadow: 0 6px 20px rgba(0, 0, 0, .35);
   --radius: 14px;
   --radius-sm: 10px;
   --radius-lg: 18px;

   /* Navbar-specific variables */
   --navbar-bg: var(--panel);
   --navbar-text: var(--text);
   --navbar-border: var(--border);
 }

 html,
 body {
   height: 100%;
   background: var(--bg);
   color: var(--text);
   font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
   -webkit-font-smoothing: antialiased;
   -moz-osx-font-smoothing: grayscale;
 }

 /* Layout */
 .app {
   display: grid;
   grid-template-columns: 280px 1fr;
   grid-template-rows: auto 1fr auto;
   min-height: 100vh;
 }

 .sidebar {
   grid-row: 1 / 4;
   background: var(--navbar-bg);
   color: var(--navbar-text);
   border-right: 1px solid var(--navbar-border);
   padding: 1rem;
 }

 .sidebar h2 {
   font-size: 1rem;
   margin-bottom: 1rem;
   color: var(--navbar-text);
 }

 .sidebar nav p {
   margin: .5rem 0;
   color: var(--muted);
 }

 .sidebar nav p.active {
   background: var(--accent);
   color: var(--text);
   /* default for dark theme */
 }

 /* Light theme: force active text to white */
 [data-theme="light"] .sidebar nav p.active {
   color: #ffffff;
 }

 .brand {
   display: flex;
   align-items: center;
   gap: 10px;
   margin-bottom: 18px;
 }

 .brand .logo {
   width: 28px;
   height: 28px;
   border-radius: 8px;
   background: radial-gradient(circle at 30% 30%, #60a5fa, #3b82f6 60%, #1d4ed8);
   box-shadow: 0 0 0 1px rgba(255, 255, 255, .06), var(--shadow);
 }

 .brand .title {
   font-weight: 600;
   letter-spacing: .2px;
 }

 .nav {
   display: grid;
   gap: 8px;
 }

 .nav button,
 .nav a {
   all: unset;
   display: flex;
   align-items: center;
   gap: 10px;
   padding: 10px 12px;
   border-radius: var(--radius-sm);
   color: var(--text);
   cursor: pointer;
 }

 .nav button:hover,
 .nav a:hover {
   background: #0e1627;
 }

 .nav .active {
   background: #0e1627;
   border: 1px solid #152238;
 }

 .content {
   display: grid;
   grid-template-rows: auto 1fr auto;
 }

 .topbar {
   display: flex;
   align-items: center;
   justify-content: space-between;
   padding: 14px 20px;
   border-bottom: 1px solid var(--border);
   background: rgba(10, 16, 26, 0.7);
   backdrop-filter: blur(8px);
   position: sticky;
   top: 0;
   z-index: 5;
 }

 .topbar .model {
   font-size: 13px;
   color: var(--muted);
 }

 /* Chat */
 .chat {
   padding: 24px;
   overflow-y: auto;
   scroll-behavior: smooth;
 }

 .thread {
   max-width: 900px;
   margin: 0 auto;
   display: grid;
   gap: 16px;
 }

 .message {
   display: grid;
   grid-template-columns: 40px 1fr;
   gap: 12px;
   align-items: flex-start;
 }

 .avatar {
   width: 36px;
   height: 36px;
   border-radius: 50%;
   background: #0f2748;
   display: grid;
   place-items: center;
   color: var(--accent);
   font-weight: 700;
   border: 1px solid #15345d;
 }

 .bubble {
   background: var(--bubble-ai);
   border: 1px solid var(--border);
   border-radius: var(--radius);
   padding: 14px 16px;
   box-shadow: var(--shadow);
   line-height: 1.55;
 }

 .message.user .bubble {
   background: var(--bubble-user);
   border-color: #134074;
 }

 .meta {
   display: flex;
   align-items: center;
   gap: 12px;
   margin-top: 8px;
   color: var(--muted);
   font-size: 12px;
 }

 .meta .status {
   display: inline-flex;
   align-items: center;
   gap: 6px;
 }

 .dot {
   width: 8px;
   height: 8px;
   border-radius: 50%;
   background: var(--accent);
   animation: pulse 1.2s ease-in-out infinite;
 }

 @keyframes pulse {
   0% {
     transform: scale(1);
     opacity: .6;
   }

   50% {
     transform: scale(1.35);
     opacity: 1;
   }

   100% {
     transform: scale(1);
     opacity: .6;
   }
 }

 /* Composer */
 .composer {
   position: sticky;
   bottom: 0;
   border-top: 1px solid var(--border);
   background: linear-gradient(180deg, rgba(9, 15, 25, 0.85), rgba(9, 15, 25, 1));
   padding: 16px 20px;
   z-index: 10;
 }

 .composer .inner {
   max-width: 900px;
   margin: 0 auto;
   background: #0c1322;
   border: 1px solid var(--border);
   border-radius: var(--radius-lg);
   box-shadow: var(--shadow);
   overflow: hidden;
 }

 .toolbar {
   display: flex;
   align-items: center;
   justify-content: space-between;
   gap: 10px;
   padding: 10px 12px;
   border-bottom: 1px solid var(--border);
 }

 .suggestions {
   display: flex;
   gap: 8px;
   flex-wrap: wrap;
 }

 .pill {
   all: unset;
   padding: 8px 12px;
   border: 1px solid #18263d;
   border-radius: 999px;
   color: var(--muted);
   cursor: pointer;
 }

 .pill:hover {
   border-color: #25456f;
   color: var(--text);
 }

 .input-row {
   display: grid;
   grid-template-columns: 1fr auto;
   gap: 8px;
   padding: 10px;
 }

 textarea {
   background: transparent;
   color: var(--text);
   border: none;
   resize: none;
   min-height: 56px;
   max-height: 160px;
   outline: none;
   padding: 12px;
   font-size: 15px;
   line-height: 1.5;
 }

 .actions {
   display: flex;
   align-items: flex-end;
   gap: 8px;
   padding: 6px;
 }

 .btn {
   all: unset;
   padding: 10px 14px;
   border-radius: 10px;
   background: var(--accent-strong);
   color: white;
   font-weight: 600;
   cursor: pointer;
   box-shadow: 0 8px 16px rgba(59, 130, 246, .2);
 }

 .btn.secondary {
   background: #152238;
   color: var(--text);
   border: 1px solid #223456;
   box-shadow: none;
 }

 .btn:disabled {
   opacity: .6;
   cursor: not-allowed;
 }

 /* Markdown basics */
 .bubble h1,
 .bubble h2,
 .bubble h3 {
   margin: 0.5em 0;
 }

 .bubble code {
   background: #0a1a2e;
   border: 1px solid #172c46;
   padding: 2px 6px;
   border-radius: 6px;
   font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas;
   font-size: 90%;
 }

 .bubble pre {
   background: #0a1a2e;
   border: 1px solid #172c46;
   padding: 12px;
   border-radius: 10px;
   overflow: auto;
 }

 .bubble ul,
 .bubble ol {
   margin: .6em 0;
   padding-left: 1.2em;
 }

 .bubble a {
   color: var(--accent);
   text-decoration: none;
 }

 .bubble a:hover {
   text-decoration: underline;
 }

 /* Responsive */
 @media (max-width: 980px) {
   .app {
     grid-template-columns: 1fr;
   }

   .sidebar {
     display: none;
   }
 }

 /* Light theme toggle if needed */
 [data-theme="light"] {
   --bg: #f8fafc;
   --panel: #ffffff;
   --muted: #6b7280;
   --text: #0f172a;
   --accent: #2563eb;
   --accent-strong: #1d4ed8;
   --border: #e5e7eb;
   --bubble-user: #e8f0ff;
   --bubble-ai: #f6f8fb;
   --shadow: 0 6px 20px rgba(0, 0, 0, .08);

   --navbar-bg: var(--panel);
   --navbar-text: var(--text);
   --navbar-border: var(--border);

 }